{% extends 'attendance/base.html' %}
{% block title %}シフト一覧{% endblock %}
{% block content %}

<div class="box">
  <!-- 検索フォーム -->
  <form method="get" class="mb-4">
    <div class="field is-grouped is-align-items-flex-end" style="gap:1rem; flex-wrap:wrap;">
      <div class="field">
        <label class="label">月 (YYYY-MM)</label>
        <div class="control">
          <input class="input" type="month" name="month" value="{{ month_value }}">
        </div>
      </div>
      <div class="field">
        <label class="label">従業員検索（コード/氏名）</label>
        <div class="control">
          <input class="input" type="text" name="emp" value="{{ emp_query }}" placeholder="A001 / 田中">
        </div>
      </div>
      <div class="field">
        <div class="control" style="margin-top:1.8rem">
          <button class="button is-primary">検索</button>
        </div>
      </div>
    </div>
  </form>

  <!-- 見出し：YYYY-MM（数字のみ） -->
  <h2 class="title is-5">シフト一覧：{{ ym }}</h2>

  <table class="table is-fullwidth is-striped is-hoverable">
    <thead>
      <tr>
        <th>日付</th>
        <th>社員番号</th>
        <th>氏名</th>
        <th>開始</th>
        <th>終了</th>
        <th>備考</th>
      </tr>
    </thead>
    <tbody>
      {% for s in shifts %}
      <tr>
        <td>{{ s.date|date:"Y/m/d" }}</td>
        <td>{{ s.employee.code }}</td>
        <td>{{ s.employee.name }}</td>
        <td>{{ s.start_time|time:"H:i" }}</td>
        <td>{{ s.end_time|time:"H:i" }}</td>
        <td>{{ s.note }}</td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="6" class="has-text-centered">該当するシフトはありません。</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% endblock %}
